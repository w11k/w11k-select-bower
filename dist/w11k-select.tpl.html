<div class="dropdown w11k-select">
  <div class="input-group select-toggle" w11k-dropdown-toggle="dropdown" ng-class="{disabled: isDisabled}">
    <div class="input-group-addon deselect-all" ng-if="!isDisabled && !isRequired && !isEmpty()" ng-click="deselectAll($event)">
      <i class="fa fa-times icon-deselect-all"></i>
    </div>
    <div class="form-control" ng-disabled="isDisabled">
      {{header.text}}
    </div>
    <div class="input-group-addon">
      <i class="fa" ng-class="{ 'fa-chevron-down': !dropdown.isOpen(), 'fa-chevron-up': dropdown.isOpen(), 'icon-dropdown-open': !dropdown.isOpen(), 'icon-dropdown-closed': dropdown.isOpen() }"></i>
    </div>
  </div>
  <div class="dropdown-menu">
    <div class="header">
      <div class="filter input-group" ng-if="filter.active">
        <input class="form-control"
               type="text"
               ng-model="filter.values.label"
               placeholder="{{filter.placeholder}}"
               ng-keypress="onKeyPressedInFilter($event)"
            />
        <a class="input-group-addon clear" ng-click="clearFilter()">
          <i class="fa fa-times icon-clear-filter"></i>
        </a>
      </div>
      <div class="controls" ng-show="isMultiple">
        <div class="row">
          <div class="col-xs-6">
            <button type="button" class="btn btn-default btn-sm" ng-click="selectFiltered()">
              <i class="fa fa-check-square-o icon-select-filtered"></i>
              <span class="select-filtered-text">all</span>
            </button>
          </div>
          <div class="col-xs-6">
            <button type="button" class="btn btn-default btn-sm" ng-click="deselectFiltered()">
              <i class="fa fa-square-o icon-deselect-filtered"></i>
              <span class="deselect-filtered-text">none</span>
            </button>
          </div>
        </div>
      </div>
    </div>
    <div class="content" infinite-scroll="showMoreOptions()" infinite-scroll-distance="0.5">
      <ul class="items list-unstyled">
        <li bindonce="option" ng-repeat="option in optionsToShow track by option.index" ng-click="select(option)" ng-class="{'selected': option.selected }">
          <div class="state">
            <input type="checkbox" ng-model="option.selected" ng-change="onOptionStateChange()" ng-click="onOptionStateClick($event)">
          </div>
          <div class="name" bo-text="option.label"></div>
        </li>
      </ul>
    </div>
  </div>
</div>
