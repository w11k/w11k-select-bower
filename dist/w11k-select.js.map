{"version":3,"file":null,"sources":["../src/model/config.model.ts","../src/w11k-select-helper.factory.ts","../src/model/option-state.enum.ts","../src/lib/set-selected.ts","../src/lib/external-option-2-value.ts","../src/lib/internal-option-2-value.ts","../src/lib/internal-options-2-external-model.ts","../src/lib/value-2-tracking-id.ts","../src/lib/external-option-2-label.ts","../src/model/internal-option.model.ts","../src/lib/external-options-2-internal-options.ts","../src/lib/collect-active-labels.ts","../src/lib/build-internal-options-map.ts","../src/lib/array-exists-and-contains.ts","../src/lib/filter-internal-options.ts","../src/w11k-select.directive.ts","../src/w11k-select-option/w11k-select-option.directive.ts","../src/w11k-select-checkbox/w11k-checkbox.directive.ts","../src/w11k-select-infinite-scroll.directive.ts","../src/lib/key-listener.ts","../src/w11k-select.ts"],"sourcesContent":["export class ConfigCommon {\n  templateUrl: string = 'w11k-select.tpl.html';\n  templateUrlOptions: string = 'w11k-select-option.tpl.html';\n}\nexport interface StyleConfig {\n  marginBottom: '10px';\n  maxHeight: undefined | string;\n}\n\nexport interface FilterConfig {\n  active: boolean;\n  placeholder: string;\n  select: {\n    active: boolean;\n    text: undefined | string;\n  };\n  deselect: {\n    active: true,\n    text: undefined | string;\n  };\n}\n\nexport class ConfigInstance {\n  /** for form validation */\n  required: boolean = false;\n  /** Hide checkboxes during single selection */\n  hideCheckboxes: boolean = false;\n  /** single or multiple select */\n  multiple: boolean = true;\n  /** force ngModel to be an array for single select too */\n  forceArrayOutput = false;\n  /** disable user interaction */\n  disabled: boolean = false;\n  /** all the configuration for the header (visible if dropdown closed) */\n  header = {\n    /** text to show if no item selected (plain text, no evaluation, no data-binding) */\n    placeholder: '',\n    /**\n     * text to show if item(s) selected (expression, evaluated against user scope)\n     * make sure to enclose your expression withing quotes, otherwise it will be evaluated too early\n     * default: undefined evaluates to a comma separated representation of selected items\n     * example: ng-model='options.selected' w11k-select-config='{header: {placeholder: 'options.selected.length'}}'\n     */\n    text: undefined\n  };\n  dropdown: {\n    onOpen: (() => void) | undefined,\n    onClose: (() => void) | undefined\n  } = {\n    onOpen: undefined,\n    onClose: undefined\n  };\n  /** all the configuration for the filter section within the dropdown */\n  filter: FilterConfig = {\n    /** activate filter input to search for options */\n    active: true,\n    /** text to show if no filter is applied */\n    placeholder: 'Filter',\n    /** 'select all filtered options' button */\n    select: {\n      /** show select all button */\n      active: true,\n      /**\n       * label for select all button\n       * default: undefined evaluates to 'all'\n       */\n      text: undefined\n    },\n    /** 'deselect all filtered options' button */\n    deselect: {\n      /** show deselect all button */\n      active: true,\n      /**\n       * label for deselect all button\n       * default: undefined evaluates to 'none'\n       */\n      text: undefined\n    }\n  };\n\n  /** values for dynamically calculated styling of dropdown */\n  style: StyleConfig = {\n    /** margin-bottom for automatic height adjust */\n    marginBottom: '10px',\n    /** static or manually calculated max height (disables internal height calculation) */\n    maxHeight: undefined\n  };\n  /** when set to true, the clear-button is always visible. */\n  showClearAlways: boolean = false;\n  children: string;\n\n}\n\nexport class Config {\n  common: ConfigCommon;\n  instance: ConfigInstance;\n\n  constructor (common?: ConfigCommon, instance?: ConfigInstance) {\n    this.common = common || new ConfigCommon();\n    this.instance = instance || new ConfigInstance();\n  }\n}\n","/** @internal */\nimport * as angular from 'angular';\nimport {IDocumentService, IParseService} from 'angular';\n\nexport class W11KSelectHelper {\n\n  //               value                 as    label                for       item              in    collection                    |  filter                        track by     tracking\n  OPTIONS_EXP = /^([a-zA-Z][\\w\\.]*)(?:\\s+as\\s+([a-zA-Z][\\w\\.]*))?\\s+for\\s+(?:([a-zA-Z][\\w]*))\\s+in\\s+([$_a-zA-Z][\\w\\.\\(\\)]*(?:\\s+\\|\\s[a-zA-Z][\\w\\:_\\{\\}']*)*)(?:\\s+track\\sby\\s+([a-zA-Z][\\w\\.]*))?$/;\n\n  constructor (public $parse: IParseService,\n               public $document: IDocumentService) {\n    'ngInject';\n\n  }\n\n  extendDeep (dst, ...otherArgs) {\n    angular.forEach(otherArgs, (obj) => {\n      if (obj !== dst) {\n        angular.forEach(obj, (value, key) => {\n          if (dst[key] && dst[key].constructor && dst[key].constructor === Object) {\n            this.extendDeep(dst[key], value);\n          } else {\n            dst[key] = value;\n          }\n        });\n      }\n    });\n    return dst;\n  }\n\n  hashCode (value) {\n    let valueAsString: string;\n    if (typeof value === 'object') {\n      valueAsString = angular.toJson(value);\n    } else {\n      valueAsString = value.toString();\n    }\n\n    let hash = 0;\n    let length = valueAsString.length;\n    for (let i = 0; i < length; i++) {\n      hash = valueAsString.charCodeAt(i) + (hash << 6) + (hash << 16) - hash;\n    }\n\n    return hash.toString(36);\n  }\n\n  parseOptions (input) {\n\n    let match = input.match(this.OPTIONS_EXP);\n    if (!match) {\n      let expected = '\"item.value\" [as \"item.label\"] for \"item\" in \"collection [ | filter ] [track by item.value.unique]\"';\n      throw new Error('Expected options in form of \\'' + expected + '\\' but got \"' + input + '\".');\n    }\n\n    let result: any = {\n      value: this.$parse(match[1]),\n      label: this.$parse(match[2] || match[1]),\n      item: match[3],\n      collection: this.$parse(match[4])\n    };\n\n    if (match[5] !== undefined) {\n      result.tracking = this.$parse(match[5]);\n    }\n\n    return result;\n  }\n\n  getParent (element, selector) {\n    // with jQuery\n    if (angular.isFunction(element.parents)) {\n      let container = element.parents(selector);\n      if (container.length > 0) {\n        return container[0];\n      }\n\n      return;\n    }\n\n    // without jQuery\n    let matchesSelector = 'MatchesSelector';\n    let matchFunctions = [\n      'matches',\n      'matchesSelector',\n      'moz' + matchesSelector,\n      'webkit' + matchesSelector,\n      'ms' + matchesSelector,\n      'o' + matchesSelector\n    ];\n\n    for (let index in matchFunctions) {\n      let matchFunction = matchFunctions[index];\n      if (angular.isFunction(element[0][matchFunction])) {\n        let parent1 = element[0].parentNode;\n        while (parent1 !== this.$document[0]) {\n          if (parent1[matchFunction](selector)) {\n            return parent1;\n          }\n          parent1 = parent1.parentNode;\n        }\n\n        return;\n      }\n    }\n\n    return;\n  }\n}\n","export enum OptionState {\n  unselected,\n  selected,\n  childsSelected\n}\n","import {InternalOption} from '../model/internal-option.model';\nimport {OptionState} from '../model/option-state.enum';\n\nexport function setSelected (options: InternalOption[], selected: boolean) {\n  let i = options.length;\n  while (i--) {\n    options[i].selected = selected;\n    options[i].state = selected ? OptionState.selected : OptionState.unselected;\n\n    setSelected(options[i].children || [], selected);\n  }\n}\n\n// Sets all options to selected (deep) where isSearchResultOrParent is true\nexport function setFilteredSelected (options: InternalOption[]) {\n  options.forEach(option => {\n    option.selected = option.isSearchResultOrParent;\n    option.state = option.selected ? OptionState.selected : OptionState.unselected;\n    setFilteredSelected(option.children || []);\n  });\n}\n","export function externalOption2value (option, optionsExpParsed) {\n  let context = {};\n  context[optionsExpParsed.item] = option;\n\n  return optionsExpParsed.value(context);\n}\n","import {externalOption2value} from './external-option-2-value';\n\nexport function internalOption2value (option, optionsExpParsed) {\n  return externalOption2value(option.model, optionsExpParsed);\n}\n","import {internalOption2value} from './internal-option-2-value';\nimport {Config} from '../model/config.model';\nimport {InternalOption} from '../model/internal-option.model';\nimport {OptionState} from '../model/option-state.enum';\n\nexport function internalOptions2externalModel (options, optionsExpParsed, config: Config) {\n  let arr = [];\n  options.forEach(option => traverse(option, arr, optionsExpParsed));\n  return arr;\n}\n\nfunction traverse (option: InternalOption, arr, optionsExpParsed) {\n  if (option.state === OptionState.selected) {\n    arr.push(internalOption2value(option, optionsExpParsed));\n  }\n  option.children.forEach(option => traverse(option, arr, optionsExpParsed));\n\n}\n","export function value2trackingId (value, w11kSelectHelper, optionsExpParsed) {\n  if (optionsExpParsed.tracking !== undefined) {\n    let context = {};\n    let assignValueFn = optionsExpParsed.value.assign;\n    assignValueFn(context, value);\n\n    let trackingValue = optionsExpParsed.tracking(context);\n\n    if (trackingValue === undefined) {\n      throw new Error('Couldn\\'t get \\'track by\\' value. Please make sure to only use something in \\'track byâ€™ part of w11kSelectOptions expression, accessible from result of value part. (\\'option.data\\' and \\'option.data.unique\\' but not \\'option.unique\\')');\n    }\n\n    return trackingValue.toString();\n  } else {\n    return w11kSelectHelper.hashCode(value);\n  }\n\n}\n","export function externalOption2label (option, optionsExpParsed) {\n  let context = {};\n  context[optionsExpParsed.item] = option;\n\n  return optionsExpParsed.label(context);\n}\n","import {OptionState} from './option-state.enum';\n\nexport class InternalOption {\n\n  trackingId: string;\n  label: string;\n  model: any;\n  selected: boolean;\n  state: OptionState;\n  children: InternalOption[];\n  isSearchResultOrParent: boolean;\n  parent: any;\n\n  constructor (trackingId: string, label: string, model: any, selected: boolean, state: OptionState, children: InternalOption[], parent: any) {\n    this.trackingId = trackingId;\n    this.label = label;\n    this.model = model;\n    this.selected = selected;\n    this.state = state;\n    this.children = children;\n    this.parent = parent;\n    this.isSearchResultOrParent = true;\n  }\n}\n","import {externalOption2value} from './external-option-2-value';\nimport {externalOption2label} from './external-option-2-label';\nimport {value2trackingId} from './value-2-tracking-id';\nimport {OptionState} from '../model/option-state.enum';\nimport {ConfigInstance} from '../model/config.model';\nimport {InternalOption} from '../model/internal-option.model';\n\nexport function externalOptions2internalOptions (externalOptions, viewValue, w11kSelectHelper, optionsExpParsed, config: ConfigInstance): InternalOption[] {\n  let viewValueIDs = {};\n\n  let i = viewValue.length;\n\n  while (i--) {\n    let trackingId = value2trackingId(viewValue[i], w11kSelectHelper, optionsExpParsed);\n    viewValueIDs[trackingId] = true;\n  }\n\n  function prepareOptions (externalOption, parent?: string) {\n    let value = externalOption2value(externalOption, optionsExpParsed);\n    let trackingId = value2trackingId(value, w11kSelectHelper, optionsExpParsed);\n    let label = externalOption2label(externalOption, optionsExpParsed);\n\n    let internalOption = new InternalOption(\n        trackingId,\n        label,\n        externalOption,\n        !!viewValueIDs[trackingId],\n        viewValueIDs[trackingId] ? OptionState.selected : OptionState.unselected,\n        [],\n        parent || null\n    );\n\n    if (externalOption[config.children]) {\n      internalOption.children = externalOption[config.children].map(child => prepareOptions(child, trackingId));\n    }\n    return internalOption;\n  }\n\n  return externalOptions.map(prepareOptions);\n}\n","import {InternalOption} from '../model/internal-option.model';\nimport {OptionState} from '../model/option-state.enum';\n\nexport function collectActiveLabels (option: InternalOption, labelArray: string[]): void {\n  if (option.state === OptionState.selected) {\n    labelArray.push(option.label);\n  }\n  option.children.forEach(option => collectActiveLabels(option, labelArray));\n}\n","export function buildInternalOptionsMap (internalOptions, internalOptionsMap) {\n  internalOptions.forEach((option) => {\n    if (internalOptionsMap[option.trackingId]) {\n      throw new Error('Duplicate hash value for options ' + option.label + ' and ' + internalOptionsMap[option.trackingId].label);\n    }\n    internalOptionsMap[option.trackingId] = option;\n    if (option.children) {\n      buildInternalOptionsMap(option.children, internalOptionsMap);\n    }\n  });\n}\n","// Checks whether an array exists and contains items\nexport function arrayExistsAndContains (arr: any[] | null): boolean {\n  return !!arr && arr.length > 0;\n}\n","import {InternalOption} from '../model/internal-option.model';\nimport {arrayExistsAndContains} from './array-exists-and-contains';\n\nexport const filterInternals = function (resourceList: InternalOption[], searchStr: string): InternalOption[] {\n  return resourceList.map(it => {\n    if (arrayExistsAndContains(it.children)) {\n      it.children = filterInternals(it.children, searchStr);\n    }\n    it.isSearchResultOrParent = it.label.toString().toLowerCase().includes(searchStr) || ContainsResult(it.children);\n    return it;\n  });\n};\n\nfunction ContainsResult (resource: InternalOption[]): boolean {\n  return resource.some(resource => resource.isSearchResultOrParent || ContainsResult(resource.children));\n}\n","/** @internal */\nimport * as angular from 'angular';\nimport {IPromise, IScope, IFilterService, IWindowService, IQService, IDocumentService, IParseService, ITimeoutService} from 'angular';\nimport {setFilteredSelected, setSelected} from './lib/set-selected';\nimport {internalOptions2externalModel} from './lib/internal-options-2-external-model';\nimport {value2trackingId} from './lib/value-2-tracking-id';\nimport {externalOptions2internalOptions} from './lib/external-options-2-internal-options';\nimport {InternalOption} from './model/internal-option.model';\nimport {OptionState} from './model/option-state.enum';\nimport {Config, ConfigInstance} from './model/config.model';\nimport {collectActiveLabels} from './lib/collect-active-labels';\nimport {buildInternalOptionsMap} from './lib/build-internal-options-map';\nimport {W11KSelectHelper} from './w11k-select-helper.factory';\nimport {filterInternals} from './lib/filter-internal-options';\n\nexport interface Scope extends IScope {\n  config: ConfigInstance;\n  style: any;  // only required once?\n  onKeyPressedOnDropDownToggle: (event: any) => void;\n  showMoreOptions: () => void;\n  onFilterValueChanged: () => void;\n  clearFilter: () => void;\n  onKeyPressedInFilter: ($event: any) => void;\n  selectFiltered: ($event?: any) => void;\n  deselectFiltered: ($event: any) => void;\n  deselectAll: ($event: any) => void;\n  select: ($event: any) => void;\n  isEmpty: () => boolean;\n\n  options: {\n    visible: any[]\n  };\n  filter: {\n    values: any\n  };\n\n  dropdown: {\n    onOpen?: ($event: any) => void | undefined;\n    onClose?: () => void | undefined;\n    close?: () => void;\n    toggle?: any\n  };\n}\n\nexport function w11kSelect (w11kSelectConfig: Config,\n                            $parse: IParseService,\n                            $document: IDocumentService,\n                            w11kSelectHelper: W11KSelectHelper,\n                            $filter: IFilterService,\n                            $timeout: ITimeoutService,\n                            $window: IWindowService,\n                            $q: IQService) {\n  'ngInject';\n\n  let jqWindow = angular.element($window);\n\n  return {\n    restrict: 'A',\n    replace: false,\n    templateUrl: w11kSelectConfig.common.templateUrl,\n    scope: {},\n    require: 'ngModel',\n    controller: function ($scope, $attrs, $parse) {\n      if ($attrs.w11kSelect && $attrs.w11kSelect.length > 0) {\n        let exposeExpression = $parse($attrs.w11kSelect);\n\n        if (exposeExpression.assign) {\n          exposeExpression.assign($scope.$parent, this);\n        }\n      }\n\n      this.open = function () {\n        $scope.dropdown.open();\n      };\n\n      this.close = function () {\n        $scope.dropdown.close();\n      };\n\n      this.toggle = function () {\n        $scope.dropdown.toggle();\n      };\n    },\n    compile: function (tElement, tAttrs) {\n      let configExpParsed = $parse(tAttrs.w11kSelectConfig);\n      let optionsExpParsed = w11kSelectHelper.parseOptions(tAttrs.w11kSelectOptions);\n\n      let ngModelSetter = $parse(tAttrs.ngModel).assign;\n      let assignValueFn = optionsExpParsed.value.assign;\n\n      if (optionsExpParsed.tracking !== undefined && assignValueFn === undefined) {\n        throw new Error('value part of w11kSelectOptions expression must be assignable if \\'track by\\' is used');\n      }\n\n      return function (scope: Scope, iElement: any, iAttrs: any, controller: any) {\n        let domElement = iElement[0];\n\n        /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n         * internal model\n         * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\n\n        let optionsAlreadyRead: IPromise<void>;\n        let ngModelAlreadyRead: boolean = false;\n\n        let hasBeenOpened = false;\n        let internalOptions: InternalOption[] = [];\n        let internalOptionsMap = {};\n        let optionsFiltered: InternalOption[] = [];\n\n        scope.options = {\n          visible: []\n        };\n\n        scope.filter = {\n          values: {}\n        };\n\n        scope.config = angular.copy(w11kSelectConfig.instance);\n\n        // marker to read some parts of the config only once\n        let configRead = false;\n\n        scope.$watch(\n            function () {\n              return configExpParsed(scope.$parent);\n            },\n            function (newConfig) {\n              if (angular.isArray(newConfig)) {\n                w11kSelectHelper.extendDeep.apply(w11kSelectHelper, [scope.config].concat(newConfig));\n                applyConfig();\n              } else if (angular.isObject(newConfig)) {\n                w11kSelectHelper.extendDeep(scope.config, newConfig);\n                applyConfig();\n              }\n            },\n            true\n        );\n\n        function applyConfig () {\n          optionsAlreadyRead.then(function () {\n            checkSelection();\n            updateNgModel();\n            checkConfig(scope.config, setViewValue);\n          });\n\n          if (!configRead) {\n            updateStaticTexts();\n            configRead = true;\n          }\n        }\n\n        function updateStaticTexts () {\n          if (scope.config.filter.select.active && scope.config.filter.select.text !== null && typeof(scope.config.filter.select.text) !== 'undefined') {\n            let selectFilteredButton = domElement.querySelector('.select-filtered-text');\n            selectFilteredButton.textContent = scope.config.filter.select.text;\n          }\n\n          if (scope.config.filter.deselect.active && scope.config.filter.deselect.text !== null && typeof(scope.config.filter.deselect.text) !== 'undefined') {\n            let deselectFilteredButton = domElement.querySelector('.deselect-filtered-text');\n            deselectFilteredButton.textContent = scope.config.filter.deselect.text;\n          }\n\n          if (scope.config.header.placeholder !== null && typeof(scope.config.header.placeholder) !== 'undefined') {\n            let headerPlaceholder = domElement.querySelector('.header-placeholder');\n            headerPlaceholder.textContent = scope.config.header.placeholder;\n          }\n        }\n\n        function checkSelection () {\n          if (scope.config.multiple === false) {\n            let selectedOptions: InternalOption[] = internalOptions.filter(\n                (option) => option.state === OptionState.selected\n            );\n\n            if (selectedOptions.length > 0) {\n              setSelected(selectedOptions, false);\n              selectedOptions[0].state = OptionState.selected;\n            }\n          }\n        }\n\n        /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n         * dropdown\n         * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\n\n        let domDropDownMenu = domElement.querySelector('.dropdown-menu');\n        let domDropDownContent = domElement.querySelector('.dropdown-menu .content');\n        let domHeightAdjustContainer = w11kSelectHelper.getParent(iElement, '.w11k-select-adjust-height-to');\n        let domHeaderText = domElement.querySelector('.header-text');\n\n        function onEscPressed (event) {\n          if (event.keyCode === 27) {\n            if (scope.dropdown.close) { // check is for ts only\n              scope.dropdown.close();\n            }\n          }\n        }\n\n        function adjustHeight () {\n          if (angular.isDefined(scope.config.style.maxHeight)) {\n            domDropDownContent.style.maxHeight = scope.config.style.maxHeight;\n          } else {\n            let maxHeight = calculateDynamicMaxHeight();\n            domDropDownContent.style.maxHeight = maxHeight + 'px';\n\n          }\n        }\n\n        function resetHeight () {\n          domDropDownContent.style.maxHeight = '';\n        }\n\n        function calculateDynamicMaxHeight () {\n          let maxHeight;\n\n          let contentOffset = domDropDownContent.getBoundingClientRect().top;\n\n          let windowHeight = $window.innerHeight || $window.document.documentElement.clientHeight;\n\n          let containerHeight;\n          let containerOffset;\n\n          if (angular.isDefined(domHeightAdjustContainer)) {\n            containerHeight = domHeightAdjustContainer.innerHeight || domHeightAdjustContainer.clientHeight;\n            containerOffset = domHeightAdjustContainer.getBoundingClientRect().top;\n          } else {\n            containerHeight = $window.innerHeight || $window.document.documentElement.clientHeight;\n            containerOffset = 0;\n          }\n\n          if (scope.config.style.marginBottom.indexOf('px') < 0) {\n            throw new Error('Illegal Value for w11kSelectStyle.marginBottom');\n          }\n          let marginBottom = parseFloat(scope.config.style.marginBottom.slice(0, -2));\n\n          let referenceHeight;\n          let referenceOffset;\n\n          if (containerHeight + containerOffset > windowHeight) {\n            referenceHeight = windowHeight;\n            referenceOffset = 0;\n          } else {\n            referenceHeight = containerHeight;\n            referenceOffset = containerOffset;\n          }\n\n          maxHeight = referenceHeight - (contentOffset - referenceOffset) - marginBottom;\n\n          let minHeightFor3Elements = 93;\n          if (maxHeight < minHeightFor3Elements) {\n            maxHeight = minHeightFor3Elements;\n          }\n\n          return maxHeight;\n        }\n\n        scope.dropdown = {\n          onOpen: function ($event) {\n            if (scope.config.disabled) {\n              $event.prevent();\n              return;\n            }\n\n            if (hasBeenOpened === false) {\n              hasBeenOpened = true;\n            }\n            filterOptions();\n\n            $document.on('keyup', onEscPressed);\n\n            domDropDownMenu.style.visibility = 'hidden';\n            $timeout(function () {\n              adjustHeight();\n              domDropDownMenu.style.visibility = 'visible';\n\n              if (scope.config.filter.active) {\n                // use timeout to open dropdown first and then set the focus,\n                // otherwise focus won't be set because iElement is not visible\n                $timeout(function () {\n                  iElement[0].querySelector('.dropdown-menu input').focus();\n                });\n              }\n            });\n            jqWindow.on('resize', adjustHeight);\n\n            if (angular.isFunction(scope.config.dropdown.onOpen)) {\n              (scope.config.dropdown.onOpen as any)();\n            }\n          },\n          onClose: function () {\n            // important: set properties of filter.values to empty strings not to null,\n            // otherwise angular's filter won't work\n            scope.filter.values.label = '';\n\n            $timeout(function () {\n              resetHeight();\n            });\n            $document.off('keyup', onEscPressed);\n            jqWindow.off('resize', adjustHeight);\n\n            if (angular.isFunction(scope.config.dropdown.onClose)) {\n              (scope.config.dropdown.onClose as any)();\n            }\n          }\n        };\n\n        scope.$on('$destroy', function () {\n          $document.off('keyup', onEscPressed);\n          jqWindow.off('resize', adjustHeight);\n        });\n\n        scope.onKeyPressedOnDropDownToggle = function ($event) {\n          // enter or space\n          if ($event.keyCode === 13 || $event.keyCode === 32) {\n            $event.preventDefault();\n            $event.stopPropagation();\n\n            scope.dropdown.toggle();\n          }\n        };\n\n        function updateHeader () {\n          if (angular.isDefined(scope.config.header.text)) {\n            domHeaderText.textContent = scope.$parent.$eval(scope.config.header.text as any);\n          } else {\n            let arr = [];\n            internalOptions.forEach(option => collectActiveLabels(option, arr));\n            domHeaderText.textContent = arr.join(', ');\n          }\n        }\n\n        /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n         * filter\n         * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\n\n        let initialLimitTo = 80;\n        let increaseLimitTo = initialLimitTo * 0.5;\n\n        function filterOptions () {\n          if (hasBeenOpened) {\n            // false as third parameter: use contains to compare\n            optionsFiltered = filterInternals(internalOptions, scope.filter.values.label ? scope.filter.values.label.toLowerCase() : '');\n            scope.options.visible = optionsFiltered.slice(0, initialLimitTo);\n          }\n        }\n\n        scope.showMoreOptions = function () {\n          scope.options.visible = optionsFiltered.slice(0, scope.options.visible.length + increaseLimitTo);\n        };\n\n        scope.onFilterValueChanged = function () {\n          filterOptions();\n        };\n\n        scope.clearFilter = function () {\n          scope.filter.values = {};\n          filterOptions();\n        };\n\n        scope.onKeyPressedInFilter = function ($event) {\n          // on enter\n          if ($event.keyCode === 13) {\n            $event.preventDefault();\n            $event.stopPropagation();\n\n            scope.selectFiltered();\n          }\n        };\n\n        /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n         * buttons\n         * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\n\n        scope.selectFiltered = function ($event?) {\n          if (angular.isDefined($event)) {\n            $event.preventDefault();\n            $event.stopPropagation();\n          }\n          if (scope.config.children) {\n            setFilteredSelected(internalOptions);\n          } else if (scope.config.multiple) {\n            setSelected(optionsFiltered, true);\n          } else if (optionsFiltered.length === 1) {\n            scope.select(optionsFiltered[0]); // behaves like if the option was clicked using the mouse\n          }\n\n          setViewValue();\n        };\n\n        scope.deselectFiltered = function ($event) {\n          if (angular.isDefined($event)) {\n            $event.preventDefault();\n            $event.stopPropagation();\n          }\n\n          setSelected(optionsFiltered, false);\n          setViewValue();\n        };\n\n        scope.deselectAll = function ($event) {\n          if (angular.isDefined($event)) {\n            $event.preventDefault();\n            $event.stopPropagation();\n          }\n\n          setSelected(internalOptions, false);\n          setViewValue();\n        };\n\n        /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n         * options\n         * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\n\n        let updateOptions = (function () {\n          let deferred = $q.defer<void>();\n          optionsAlreadyRead = deferred.promise;\n\n          return function updateOptions () {\n            let externalOptions = optionsExpParsed.collection(scope.$parent);\n            let viewValue = controller.$viewValue;\n\n            if (angular.isArray(externalOptions)) {\n              internalOptions = externalOptions2internalOptions(externalOptions, viewValue, w11kSelectHelper, optionsExpParsed, scope.config);\n              internalOptionsMap = {};\n              buildInternalOptionsMap(internalOptions,internalOptionsMap);\n              filterOptions();\n\n              if (ngModelAlreadyRead) {\n                updateNgModel();\n              }\n              deferred.resolve();\n            }\n          };\n        })();\n\n        // watch for changes of options collection made outside\n        scope.$watchCollection(\n            function externalOptionsWatch () {\n              return optionsExpParsed.collection(scope.$parent);\n            },\n            function externalOptionsWatchAction (newVal) {\n              if (angular.isDefined(newVal)) {\n                updateOptions();\n              }\n            }\n        );\n\n        scope.select = function select (option: InternalOption) {\n          // runs only if hierarchy is flat and multiple false\n\n          if (scope.config.multiple) {\n            setViewValue();\n            return;\n          }\n\n          // disable all others:\n          setSelected(internalOptions, false);\n          option.state = OptionState.selected;\n          setViewValue();\n          (scope.dropdown.close as any)();\n        };\n\n        /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n         * ngModel\n         * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\n\n        function setViewValue () {\n          let selectedValues = internalOptions2externalModel(internalOptions, optionsExpParsed, w11kSelectConfig);\n\n          controller.$setViewValue(selectedValues);\n          updateHeader();\n        }\n\n        function updateNgModel () {\n          let value = internalOptions2externalModel(internalOptions, optionsExpParsed, w11kSelectConfig);\n          angular.forEach(controller.$parsers, function (parser) {\n            value = parser(value);\n          });\n\n          ngModelSetter(scope.$parent, value);\n        }\n\n        function render () {\n          optionsAlreadyRead.then(function () {\n            ngModelAlreadyRead = true;\n\n            let viewValue = controller.$viewValue;\n\n            setSelected(internalOptions, false);\n\n            let i = viewValue.length;\n            while (i--) {\n              let trackingId = value2trackingId(viewValue[i], w11kSelectHelper, optionsExpParsed);\n              let option = internalOptionsMap[trackingId];\n\n              if (option) {\n                option.state = OptionState.selected;\n              }\n            }\n\n            updateHeader();\n          });\n        }\n\n        function external2internal (modelValue) {\n          let viewValue;\n\n          if (angular.isArray(modelValue)) {\n            viewValue = modelValue;\n          } else if (angular.isDefined(modelValue)) {\n            viewValue = [modelValue];\n          } else {\n            viewValue = [];\n          }\n\n          return viewValue;\n        }\n\n        function internal2external (viewValue) {\n          if (angular.isUndefined(viewValue)) {\n            return;\n          }\n\n          let modelValue;\n\n          if (scope.config.multiple || scope.config.forceArrayOutput) {\n            modelValue = viewValue;\n          } else {\n            modelValue = viewValue[0];\n          }\n\n          return modelValue;\n        }\n\n        function validateRequired (value): boolean {\n          if (scope.config.required) {\n            if (scope.config.multiple === true && value.length === 0) {\n              return false;\n            }\n            if (scope.config.multiple === false && scope.config.forceArrayOutput === true && value.length === 0) {\n              return false;\n            }\n            if (scope.config.multiple === false && value === undefined) {\n              return false;\n            }\n\n          }\n\n          return true;\n        }\n\n        function isEmpty () {\n          let value = controller.$viewValue;\n          return !(angular.isArray(value) && value.length > 0);\n        }\n\n        scope.isEmpty = isEmpty;\n\n        controller.$isEmpty = isEmpty;\n\n        controller.$render = render;\n        controller.$formatters.push(external2internal);\n        controller.$validators.required = validateRequired;\n        controller.$parsers.push(internal2external);\n\n      };\n    }\n  };\n}\n\nfunction checkConfig (config: ConfigInstance, setViewValue) {\n  /**\n   *  Currently there is a bug if multiple = false and required = true.\n   *  Then the validator runs only once, before the config is present\n   *  and returns a wrong validation state.\n   *  might be fixed by calling updateNgModel() here\n   */\n  // throw error if multiple is false and childrenKey is present\n  if (config.children && !config.multiple) {\n    throw new Error('Multiple must be enabled when displaying hierarchically structure');\n  }\n  if (config.children) {\n    setViewValue();\n  }\n}\n","import {OptionState} from '../model/option-state.enum';\nimport {InternalOption} from '../model/internal-option.model';\nimport {Config} from '../model/config.model';\nimport {IDirective} from 'angular';\n\nclass Result {\n  selected: number = 0;\n  unselected: number = 0;\n  childsSelected: number = 0;\n  length: number;\n\n  constructor (length: number) {\n    this.length = length;\n  }\n}\n\nexport function w11kSelectOptionDirective (w11kSelectConfig: Config): IDirective {\n  'ngInject';\n\n  return {\n    restrict: 'A',\n    replace: false,\n    templateUrl: w11kSelectConfig.common.templateUrlOptions,\n    scope: {\n      'options': '=',\n      'parent': '=',\n      'select': '&'\n    },\n    require: 'ngModel',\n    controller: function ($scope) {\n      if ($scope.$parent.childsMap) {\n        $scope.$parent.addChild($scope, $scope.parent);\n      }\n      $scope.childsMap = {};\n\n      $scope.upwardsClick = function (clickedOption: InternalOption, res: Result) {\n        let fatherOption: InternalOption = $scope.options.find(option => option.trackingId === clickedOption.parent);\n        if (res.selected === 0 && res.childsSelected === 0) {\n          setSelected(fatherOption, OptionState.unselected, $scope);\n        } else if (res.selected === res.length) {\n          setSelected(fatherOption, OptionState.selected, $scope);\n        } else {\n          setSelected(fatherOption, OptionState.childsSelected, $scope);\n\n        }\n\n        if ($scope.$parent.upwardsClick) {\n          let res = calcRes($scope.options);\n          $scope.$parent.upwardsClick(fatherOption, res);\n        }\n      };\n\n      $scope.addChild = function (childScope, father) {\n        $scope.childsMap[father.trackingId] = childScope;\n      };\n      $scope.onOptionStateClick = function ($event, option: InternalOption) {\n\n        switch (option.state) {\n          case OptionState.unselected:\n            setSelected(option, OptionState.selected, $scope);\n            break;\n          case OptionState.selected:\n            setSelected(option, OptionState.unselected, $scope);\n            break;\n          case OptionState.childsSelected:\n            setSelected(option, OptionState.selected, $scope);\n            break;\n        }\n\n        // upwards Click\n        if ($scope.$parent.upwardsClick) {\n          let res = calcRes($scope.options);\n          $scope.$parent.upwardsClick(option, res);\n        }\n\n        $scope.childsMap[option.trackingId].downWardstoggleAll(option.state);\n      };\n\n      $scope.downWardstoggleAll = function (toSetState: OptionState) {\n        $scope.options = toggleDownWards($scope.options, toSetState, $scope);\n      };\n\n      $scope.filterSearchResultsInView = function (item) {\n        return item.isSearchResultOrParent;\n      };\n    }\n  };\n}\n\nfunction toggleDownWards (options: InternalOption[], toSetState: OptionState, $scope): InternalOption[] {\n  return options.map(\n      option => {\n        option.children = toggleDownWards(option.children, toSetState, $scope);\n        setSelected(option, toSetState, $scope);\n        return option;\n      }\n  );\n}\n\nfunction calcRes (options: InternalOption[]): Result {\n  return options.reduce(\n      (prev: Result, next: InternalOption) => {\n        if (next.state === OptionState.selected) {\n          prev.selected++;\n        }\n        if (next.state === OptionState.unselected) {\n          prev.unselected++;\n        }\n        if (next.state === OptionState.childsSelected) {\n          prev.childsSelected++;\n        }\n\n        return prev;\n\n      },\n      new Result(options.length));\n}\n\nfunction setSelected (option: InternalOption, optionState: OptionState, $scope) {\n  option.state = optionState;\n  $scope.select({option: option});\n}\n","import {OptionState} from '../model/option-state.enum';\nimport {IDirective} from 'angular';\n\nexport class W11KSelectCheckbox {\n  state: OptionState;\n  toggle: Function;\n\n  getClass (state: OptionState): string {\n    return OptionState[state];\n  }\n\n}\n\nexport function w11kSelectCheckboxDirective (): IDirective {\n  return {\n    scope: {\n      'state': '=',\n    },\n    bindToController: true,\n    controllerAs: '$ctrl',\n    template: `<a class=\"w11k-checkbox\" ng-class=\"$ctrl.getClass($ctrl.state)\"></a>`,\n    restrict: 'E',\n    controller: W11KSelectCheckbox\n  };\n}\n","export function w11kSelectInfiniteScroll($timeout) {\n  'ngInject';\n  return {\n    link: function (scope, element, attrs) {\n      let scrollDistance = 0;\n      let scrollEnabled = true;\n      let checkImmediatelyWhenEnabled = false;\n\n      let onDomScrollHandler = function () {\n        onScrollHandler(true);\n      };\n\n      let scrollContainer = element[0];\n\n      if (scrollContainer.children.length !== 1) {\n        throw new Error('scroll container has to have exactly one child!');\n      }\n\n      let content = scrollContainer.children[0];\n\n      let onScrollHandler = function (apply?) {\n\n        let distanceToBottom = content.clientHeight - scrollContainer.scrollTop;\n        let shouldScroll = distanceToBottom <= scrollContainer.clientHeight * (scrollDistance + 1);\n\n        if (shouldScroll && scrollEnabled) {\n          if (apply) {\n            scope.$apply(function () {\n              scope.$eval(attrs.w11kSelectInfiniteScroll);\n            });\n          }\n          else {\n            scope.$eval(attrs.w11kSelectInfiniteScroll);\n          }\n        }\n        else if (shouldScroll) {\n          checkImmediatelyWhenEnabled = true;\n        }\n      };\n\n      attrs.$observe('w11kSelectInfiniteScrollDistance', function (value: any) {\n        scrollDistance = parseFloat(value);\n      });\n\n\n      attrs.$observe('w11kSelectInfiniteScrollDisabled', function (value: any) {\n        scrollEnabled = !value;\n\n        if (scrollEnabled && checkImmediatelyWhenEnabled) {\n          checkImmediatelyWhenEnabled = false;\n          onScrollHandler();\n        }\n      });\n\n      element.on('scroll', onDomScrollHandler);\n      scope.$on('$destroy', function () {\n        element.off('scroll', onDomScrollHandler);\n      });\n\n      return $timeout(function () {\n        if (attrs.w11kSelectInfiniteScrollImmediateCheck) {\n          if (scope.$eval(attrs.w11kSelectInfiniteScrollImmediateCheck)) {\n            onScrollHandler();\n          }\n        }\n      });\n    }\n  };\n}\n","export function keyListener () {\n  return function (scope, elm, attrs) {\n    // prevent scroll on space click\n    elm.bind('keydown', function (event) {\n      if (event.keyCode === 32) {\n        event.preventDefault();\n      }\n    });\n\n    // trigger click on spacer || enter\n    elm.bind('keyup', function (event) {\n      if (event.keyCode === 32 || event.keyCode === 13) {\n        scope.$apply(attrs.keyListener);\n      }\n    });\n\n  };\n}\n","'use strict';\n/** @internal */\nimport * as angular from 'angular';\nimport {IModule} from 'angular';\nimport {Config} from './model/config.model';\nimport {W11KSelectHelper} from './w11k-select-helper.factory';\nimport {w11kSelect} from './w11k-select.directive';\nimport {w11kSelectOptionDirective} from './w11k-select-option/w11k-select-option.directive';\nimport {w11kSelectCheckboxDirective} from './w11k-select-checkbox/w11k-checkbox.directive';\nimport {w11kSelectInfiniteScroll} from './w11k-select-infinite-scroll.directive';\nimport {keyListener} from './lib/key-listener';\n\nexport const module: IModule = angular.module('w11k.select', [\n  'w11k.dropdownToggle',\n  'w11k.select.template'\n]);\n\nmodule\n    .constant('w11kSelectConfig', new Config())\n    .directive('w11kSelectInfiniteScroll', w11kSelectInfiniteScroll)\n    .service('w11kSelectHelper', W11KSelectHelper)\n    .directive('w11kSelect', w11kSelect)\n    .directive('w11kSelectOption', w11kSelectOptionDirective)\n    .directive('w11kSelectCheckbox', w11kSelectCheckboxDirective)\n    .directive('keyListener', keyListener);\n"],"names":["angular.forEach","angular.toJson","element","angular.isFunction","angular.element","angular.copy","angular.isArray","angular.isObject","angular.isDefined","angular.isUndefined","setSelected","module","angular.module"],"mappings":"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"}